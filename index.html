<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Course Flowchart</title>
</head>

<body>
<header>Course Flowchart Generator</header>
<p>Please ensure that your selections meet the following criterial</p>

<ul>
  <li>The file must be a .txt</li>
  <li>Each line in the file corresponds with one required class</li>
  <li>
    Each line is in the following format:<br>
    [course_code], [course_name], [credits], [[prerequisite_classes]], [[course_availability]]
  </li>
  <li>[prerequisite_classes] must be in the format [course1_code], [course2_code], ...</li>
  <li>[course_availability] is in the format [X], [Y], ... where X and Y represent {1, 2, 3} for each quarter in a typical year the course is offered</li>
  <li>[prerequisite_classes] may be empty [] if there are no prerequisite classes</li>
  <br>
  <li>
    The final format should look like the following<br>
    EGR 2200, Engineering Probability & Stats, 3, [MAT 1235], [2, 3]
  </li>
</ul>

<form>
  <label for="major-reqs">Requirements File</label>
  <input type="file" name="major-reqs" id="major-reqs" accept=".txt" required>
  <br>
  <label for="max-credits">Max Credits Per Quarter</label>
  <input type="number" name="max-credits" id="max-credits" min="5" step="1" placeholder="15" required>
  <br>
  <label>Starting Quarter</label>
  <br>
  <input type="radio" name="start-qtr" id="autumn" value="1" required>
  <label for="autumn">Autumn</label>
  <br>
  <input type="radio" name="start-qtr" id="winter" value="2" required>
  <label for="winter">Winter</label>
  <br>
  <input type="radio" name="start-qtr" id="spring" value="3" required>
  <label for="spring">Spring</label>
  <br><br>
  <button type="submit" id="submit-btn">Submit</button>
</form>

<div id="mynetwork">
  <div class="division" id="Freshmen-Yr"></div>
  <div class="division" id="Sophomore-Yr"></div>
  <div class="division" id="Junior-Yr"></div>
  <div class="division" id="Senior-Yr"></div>
</div>

<script src="vis-network.js"></script>
<script src="script.js"></script>

<script>
  //dataInt will be the array of INTS you provide to collect course codes e.g "1230, 2430"
  //dataName will be the array of STRINGS with courseCode that shows up on the node " CSC 1230, CSC 2430"
  //dataTitle will be the array of STRINGS with courseName that shows up when you hover over the node "Introdcuation to programming"
  //DataCredits will be the array of INTS with credits for each course shows up on new line of the node " Credits: 5"
  //prereqIDs should be an array of INTS you provide that will create edges. THIS  IS THE MOST IMPORTANT ARRAY THAT PROVES IF THIS FUNCTION WORKS
      //PrereqIDS should look almost like dataInt but this time the arrangement represents the prerequisite contraints, 
      //like the connection between intro to programming and data structures 1 in the array is just a list "1230, 2430" just like any other array of strings,
      // the next thing after 2 ids should represent a connection rereqIDs contains "1230, 2430, 4430, 4457, 0975, 7348..."
          //then the edges from my function that uses this data should create edges like
          //from 1230 to 2430
          //from 4430 to 4457 
             //and NOT from 1230 to 2430
             //then 2430 to 4457
// second instance will be well avoided if prereqIDs array is well arranged
//availability is for when the courses are available as we already know it just was to have a list of arrays at at index=1 , if available in fall and winter, availability at [1] should have 1,2!

  //Number1. this is a function that takes in defined parameters to creat a graph
  //does number 1 and 3 in chat 
  function EntireGraphCreator (dataInt, dataName, dataTitle, dataCredits,  prereqIDs, availability ) {// graphCreator 
    var nodes= [];
    var edges= [];
    for (var i=0,i<dataInt.length, i++){// node creator 
      var node ={
        id: dataInt[i];
        group: [availability[i]],// the extra brackets allow courses that are offered in more than one group to have more than one array and those with 1 work just perfectly as well
        label: dataName[i]+ "\n Credits: " + dataCredits[i],
        title: dataTitle[i]
      };
      nodes.push[node];
    }
    for (var i=0; i<prereqIDs.length; i+=2){// edge creator
      var edge = {
        from:prereqIDs[i].from,
        to:prereqIDs[i+1].to,
        label: prereqIDs[i].label
      };
      edges.push[edge];
    }
    return{ // total graph creator
      nodes: new vis.DataSet{nodes}; // graph 
      edges: new vis.DataSet(edges);
    };
  }
  // group Graph creator was the trickiest to fathom
  //its almost like the regular graph but now it cares about the group part of the node based off availability
  // since availability could be "1" or both "1,2" or "1,2,3" its variable should be able to take in which ever value or values and clust single groups or groups with groups
  // it definitely might have a way it could be optimized but for now I wanted to get the logic clear for us first
  // "groupies" is what the client would want to see is available for courses in graph form
  // if a client wants to see groupies = 1, a graph for whatever is available in fall, will be produced, and same goes if the value for groupies is "1,2"
  
// Number 2. this is the function that takes in defined parameter groupies which could be "1" or "2" or "3" or "1,2" or "1,3" or" 2,3 " or "1,2,3" basically i would describe it as an array of arrays is a possible groupies value I THINK
// does Number 2 and 3 in chat
  function GroupGraphCreator (dataInt, dataName, dataTitle, dataCredits,  prereqIDs, availability, groupies){ // group graph creator 
    var nodes= [];
    var edges= [];
    for (var i=0,i<dataInt.length, i++){// node creator 
      var node ={
        id: dataInt[i],
        group: [availability[i]],// the extra brackets allow courses that are offered in more than one group to have more than one array and those with 1 work just perfectly as well
        label: dataName[i]+ "\n Credits: " + dataCredits[i],
        title: dataTitle[i]
      };
      nodes.push[node];
    }
    for (var i=0; i<prereqIDs.length; i+=2){// edge creator;
      var edge = {
        from:prereqIDs[i].from,
        to:prereqIDs[i+1].to,
        label: prereqIDs[i].label
      };
      edges.push[edge];
    }

    var filteredNodes=[];
    var filterEdges=[];

    for( var i=0; i< nodes.length; i++) {
        var node = nodes[i];
        if (groupies.includes(node.group[0])){
          filteredNodes.push(node);
        }
    }
    for( var i=0; i< edges.length; i++) {
      var edge = edges[i];
      var fromNode = nodes.find(n=>n.id ===edge.from);
      var toNode= nodes.find(n=> n.id === edges.to);
      
      if(fromNode && toNode && groupies.includes (fromNode.group[0]) && groupies.includes(toNode.group[0])) {
        filterEdges.push[edge];
      }
    }

    return { // group graph
      nodes: new vis.DataSet(filteredNodes),
      edges: new vis.DataSet(filteredEdges)
    };
    

  }

  var options = {
  width: '100%',
  height: '700px',
  interaction: {
    zoomView: false
  },
  layout: {
  hierarchical: {
  direction: "LR", // set the direction of the layout
  sortMethod: "directed", // sort the nodes according to their position in the graph
  root: 1230, // set node 19 as the root of the graph

  avoidOverlap: true
    }
  },
  physics: {
      barnesHut: {
      gravitationalConstant: -2000,
    centralGravity: 0.3,
    springLength: 95,
    springConstant: 0.04,
    damping: 0.09,
    avoidOverlap: 0
      },
    maxVelocity: 50,
    minVelocity: 0.1,
    solver: 'barnesHut'
  }
  };
     
  // create a network
  var container = document.getElementById('mynetwork');
  var network = new vis.Network(container, data, options);

 
</script>

</body>

</html>