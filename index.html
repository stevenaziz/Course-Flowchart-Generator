<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Course Flowchart</title>
</head>

<body>
<header>Course Flowchart Generator</header>
<p>Please ensure that your selections meet the following criterial</p>

<ul>
  <li>The file must be a .txt</li>
  <li>Each line in the file corresponds with one required class</li>
  <li>
    Each line is in the following format:<br>
    [course_code], [course_name], [credits], [[prerequisite_classes]], [[course_availability]]
  </li>
  <li>[prerequisite_classes] must be in the format [course1_code], [course2_code], ...</li>
  <li>[course_availability] is in the format [X], [Y], ... where X and Y represent {1, 2, 3} for each quarter in a typical year the course is offered</li>
  <li>[prerequisite_classes] may be empty [] if there are no prerequisite classes</li>
  <br>
  <li>
    The final format should look like the following<br>
    EGR 2200, Engineering Probability & Stats, 3, [MAT 1235], [2, 3]
  </li>
</ul>

<form>
  <label for="major-reqs">Requirements File</label>
  <input type="file" name="major-reqs" id="major-reqs" accept=".txt" required>
  <br>
  <label for="max-credits">Max Credits Per Quarter</label>
  <input type="number" name="max-credits" id="max-credits" min="5" step="1" placeholder="15" required>
  <br>
  <label>Starting Quarter</label>
  <br>
  <input type="radio" name="start-qtr" id="autumn" value="1" required>
  <label for="autumn">Autumn</label>
  <br>
  <input type="radio" name="start-qtr" id="winter" value="2" required>
  <label for="winter">Winter</label>
  <br>
  <input type="radio" name="start-qtr" id="spring" value="3" required>
  <label for="spring">Spring</label>
  <br><br>
  <button type="submit" id="submit-btn">Submit</button>
</form>

<div id="mynetwork"></div>

<script src="vis-network.js"></script>
<script src="script.js"></script>

<script>
  
  let courseArray = [
  {code: "CPE 3280", id: 3280, name: "Microcontroller Systems Design", credits: 5, prereqs: [1210,3760], avail: [3]}, 
  {code: "CPE 3350", id: 3350, name: "Operating Systems Programming", credits: 3, prereqs: [2431,3760], avail: [3]}, 
  {code: "CPE 3550", id: 3550, name: "Communication System Analysis", credits: 5, prereqs: [2727,1210], avail: [1]}, 
  {code: "CPE 3760", id: 3760, name: "Computer Organization & Assem Lang", credits: 5, prereqs: [1210,2430], avail: [2]},
  {code: "CPE 4750", id: 4750, name: "Computer Networks", credits: 5, prereqs: [3760], avail: [3]}
  ];

  var nodes= [];
  var edges= [];
  for (let i = 0; i < courseArray.length; i++) {
  nodes.push({
    id: courseArray[i].id,
    label: courseArray[i].code,
    title: courseArray[i].name + "\n" + courseArray[i].credits,
    shape: "box",
  });
}

// Create edges
for (let i = 0; i < courseArray.length; i++) {
  let prereqs = courseArray[i].prereqs;
  for (let j = 0; j < prereqs.length; j++) {
    edges.push({
      from: prereqs[j],
      to: courseArray[i].id,
    });
  }
}



  
  var data = {
    nodes: nodes,
    edges: edges
  }

  
  var options = {
  width: '100%',
  height: '700px',
  interaction: {
    zoomView: false
  },
  layout: {
  hierarchical: {
  direction: "LR", // set the direction of the layout
  sortMethod: "directed" // sort the nodes according to their position in the graph
    }
  },
  physics: {
      barnesHut: {
      gravitationalConstant: -2000,
    centralGravity: 0.3,
    springLength: 95,
    springConstant: 0.04,
    damping: 0.09,
    avoidOverlap: 0
      },
    maxVelocity: 50,
    minVelocity: 0.1,
    solver: 'barnesHut'
  }
  };   
 
  var container = document.getElementById('mynetwork');
  var network = new vis.Network(container, data, options);

</script>

</body>

</html>