<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Course Flowchart</title>
</head>

<body>
<header>Course Flowchart Generator</header>
<p>Please ensure that your selections meet the following criterial</p>

<ul>
  <li>The file must be a .txt</li>
  <li>Each line in the file corresponds with one required class</li>
  <li>
    Each line is in the following format:<br>
    [course_code], [course_name], [credits], [[prerequisite_classes]], [[course_availability]]
  </li>
  <li>[prerequisite_classes] must be in the format [course1_code], [course2_code], ...</li>
  <li>[course_availability] is in the format [X], [Y], ... where X and Y represent {1, 2, 3} for each quarter in a typical year the course is offered</li>
  <li>[prerequisite_classes] may be empty [] if there are no prerequisite classes</li>
  <br>
  <li>
    The final format should look like the following<br>
    EGR 2200, Engineering Probability & Stats, 3, [MAT 1235], [2, 3]
  </li>
</ul>

<form>
  <label for="major-reqs">Requirements File</label>
  <input type="file" name="major-reqs" id="major-reqs" accept=".txt" required>
  <br>
  <label for="max-credits">Max Credits Per Quarter</label>
  <input type="number" name="max-credits" id="max-credits" min="5" step="1" placeholder="15" required>
  <br>
  <label>Starting Quarter</label>
  <br>
  <input type="radio" name="start-qtr" id="autumn" value="1" required>
  <label for="autumn">Autumn</label>
  <br>
  <input type="radio" name="start-qtr" id="winter" value="2" required>
  <label for="winter">Winter</label>
  <br>
  <input type="radio" name="start-qtr" id="spring" value="3" required>
  <label for="spring">Spring</label>
  <br><br>
  <button type="submit" id="submit-btn">Submit</button>
</form>

<div id="mynetwork">
  <div class="division" id="Freshmen-Yr"></div>
  <div class="division" id="Sophomore-Yr"></div>
  <div class="division" id="Junior-Yr"></div>
  <div class="division" id="Senior-Yr"></div>
</div>

<script src="/vis-network.min.js"></script>
<script src="/script.js"></script>

<script>
  // create an array with nodes
  var nodes = new vis.DataSet([
      {id: 1230, label: 'CSC 1230 \n 5cr', shape: 'circle', title: 'Introduction to Computer Science'},
      {id: 2430, label: 'CSC 2430 \n 5cr', shape: 'circle', title: 'Data Structures I'},
      {id: 2431, label: 'CSC 2431 \n 5cr', shape: 'circle', title: 'Data Structures II'},
      {id: 1010, label: 'MAT 1010 \n 3cr', shape: 'circle', title: 'College Algebra'},
      {id: 1221, label: 'MAT 1221 \n 5cr', shape: 'circle', title: 'Survey of Calculus'},
      {id: 3220, label: 'CSC 3220 \n 4cr', shape: 'circle', title: 'Application Programming'},
      {id: 1720, label: 'MAT 1720 \n 5cr', shape: 'circle', title: 'Conputer Science Math'},
      {id: 2360, label: 'MAT 2360 \n 5cr', shape: 'circle', title: 'Introduction to Statistics'},
      {id: 3221, label: 'CSC 3221 \n 4cr', shape: 'circle', title: 'Netcentric Computing'},
      {id: 3150, label: 'CSC 3150 \n 5cr', shape: 'circle', title: 'Systems Design'},
      {id: 3310, label: 'CSC 3310 \n 4cr', shape: 'circle', title: 'Programming Languages'},
      {id: 3430, label: 'CSC 3430 \n 4cr', shape: 'circle', title: 'Algorithms Design and Analysis'},
      {id: 3750, label: 'CSC 3750 \n 5cr', shape: 'circle', title: 'Computer Archicture'},
      {id: 3350, label: 'CSC 3350 \n 3cr', shape: 'circle', title: 'Operating Systems'},
      {id: 4410, label: 'CSC 4410 \n 5cr', shape: 'circle', title: 'Database Management'},
      {id: 4151, label: 'CSC 4151 \n 3cr', shape: 'circle', title: 'Software Engineering I'},
      {id: 4152, label: 'CSC 4152 \n 3cr', shape: 'circle', title: 'Software Engineering II'},
      {id: 1000, label: 'UFDN 1000 \n 5cr', shape: 'circle', title: 'University Foundation'},
      {id: 0145, label: 'MAT 0145 \n 3cr', shape: 'circle', title: 'College Readiness Math II'},
      {id: 3000, label: 'CSC 3000 \n 1cr', shape: 'circle', title: 'Principles of Professional Practice'},
      {id: 3011, label: 'CSC 3011 \n 3cr', shape: 'circle', title: 'Digital Writing'},
      {id: 4898, label: 'CSC 4898 \n 2cr', shape: 'circle', title: 'Senior Capstone'},
      {id: 4941, label: 'CSC 4941 \n 1cr', shape: 'circle', title: 'Computer Science Internship Review'},
      {id: 2000, label: 'UFDN 2000 \n 5cr', shape: 'circle', title: 'Christian Scriptures'}
  ]);

  // create an array with edges
  var edges = new vis.DataSet([
  {from: 1221, to: 1720, arrows:{to: true}},
  {from: 1010, to: 1221, arrows: {to: true}},
  {from: 1230, to: 2430, arrows: {to: true}},
  {from: 2430, to: 2431, arrows: {to: true}},
  {from: 2430, to: 3220, arrows: {to: true}},
  {from: 2430, to: 3150, arrows: {to: true}},
  
  {from: 2431, to: 3310, arrows: {to: true}},
  {from: 3221, to: 3000, arrows: {to: true}},
  {from: 1720, to: 3310, arrows: {to: true}},
  {from: 3220, to: 3221, arrows: {to: true}},
  {from: 3220, to: 3150, arrows: {to: true}},
  {from: 2360, to: 3430, arrows: {to: true}},
  {from: 3150, to: 4410, arrows: {to: true}},
  {from: 3150, to: 4151, arrows: {to: true}},
  {from: 3430, to: 3350, arrows: {to: true}},
  {from: 3011, to: 4898, arrows: {to: true}},
  {from: 3310, to: 3430, arrows: {to: true}},
  {from: 3750, to: 4151, arrows: {to:true}},
  {from: 4151, to: 4152, arrows: {to: true}},
  {from: 3011, to: 4941, arrows: {to: true}},
  {from: 3350, to: 4898, arrows: {to: true}},
  
  {from: 0145, to: 1010, arrows: {to: true}},
  {from: 3000, to: 4898, arrows: {to: true}},
  {from: 3011, to: 4941, arrows: {to: true}},
  {from: 1000, to: 2000, arrows: {to: true}},
  {from: 2000, to: 2431, arrows: {to: true}}
  
  ]);

  
  var data = {
      nodes: nodes,
      edges: edges
  };
  var options = {
  width: '100%',
  height: '700px',
  interaction: {
    zoomView: false
  },
  layout: {
  hierarchical: {
  direction: "LR", // set the direction of the layout
  sortMethod: "directed", // sort the nodes according to their position in the graph
  root: 1230, // set node 19 as the root of the graph

  avoidOverlap: true
    }
  },
  physics: {
      barnesHut: {
      gravitationalConstant: -2000,
    centralGravity: 0.3,
    springLength: 95,
    springConstant: 0.04,
    damping: 0.09,
    avoidOverlap: 0
      },
    maxVelocity: 50,
    minVelocity: 0.1,
    solver: 'barnesHut'
  }
  };
     
  // create a network
  var container = document.getElementById('mynetwork');
  var network = new vis.Network(container, data, options);

  fetch('Majors.txt')
  .then(response => response.text())
  .then(text => {
    
    const majorsList = document.getElementById('majors-list');
    const majors = text.split('\n');
    const nodes = [];
    const edges =[];

    majors.forEach((major) => { //this is for requirements
      const majorItem = document.createElement('li');
      //const requirements = major.split(',')[3]; majorItem.textContent=majors;
      majorItem.textContent=major;
      majorsList.appendChild(majorItem);
    });
    

  majors.forEach((major) => {
  const majorItem = document.createElement('p');
  
  const [classCode, className, classCred, classPreq, classAvailability]= major.split(',');
  const node = {
      id:classCode,
        label:`${classCode} (${classCred} credits)`,
      credit: classCred,
      prerequisites: classPreq,
      availability: classAvailability,
    };
    nodes.push(node);
    //majorItem.textContent=JSON.stringify(node);
  // majorsList.appendChild(majorItem);
  });

  for (let i = 0; i < nodes.length-1; i++){
    const edge ={
      from: nodes[i].id,
      to: nodes[i+1].id,
    };
    edges.push(edge);

    console.log(edge);
    const majorItem = document.createElement('p');
    //MajorItem.textContent=edge;
    //majorsList.appendChild(majorItem);
  }
  });    

</script>

</body>

</html>